**Базовый формат:**

```bash
sed [опции] 'команда' файл
```

---

**1. Замена (`s`):**

```bash
sed 's/old/new/' file       # заменить первое вхождение в строке
sed 's/old/new/g' file      # заменить все вхождения в строке
sed -i 's/old/new/g' file   # заменить прямо в файле (in-place)
```

Разделитель `/` можно менять, если внутри встречаются слэши:

```bash
sed 's|/usr/local|/opt|g' file
```

---

**2. Адресация (ограничение области действия):**

```bash
sed '5s/foo/bar/' file        # только в 5-й строке
sed '1,10s/foo/bar/g' file    # только в строках 1–10
sed '/pattern/s/foo/bar/g'    # только в строках, где совпал pattern
```

---

**3. Удаление и вставка:**

```bash
sed '/pattern/d' file         # удалить строки, где совпал pattern
sed '3d' file                 # удалить третью строку
sed '2i\текст' file           # вставить строку перед второй
sed '$a\текст' file           # добавить строку в конец
```

---

**4. Подстановка с capture-группами (regexp):**

```bash
sed -E 's/([0-9]+)/[&]/g' file   # & = совпадение целиком
sed -E 's/(foo)(bar)/\2\1/' file # \1, \2 = группы
```

---

**5. Опции:**

* `-i` — редактировать файл на месте (допиши `.bak` для резервной копии: `-i.bak`)
* `-E` — включить extended regex (чтобы не писать кучу `\`)
* `-n` + `p` — печатать только выбранные строки:

  ```bash
  sed -n '/error/p' log.txt
  ```

---

**6. Класс символов:**
`[[:space:]]` — пробелы
`[[:digit:]]` — цифры
`[[:alpha:]]` — буквы
`[^...]` — отрицание (не то)

---

И напоследок — **тест без записи:**

```bash
sed 's/foo/bar/g' file | less
```
